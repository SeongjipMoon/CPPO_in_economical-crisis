# Constant proportion portfolio optimal in economical-crisis

Constant proportion portfolio optimal in economical crisis 

경제 위기 기간에 최적화된 고정 비율 포트폴리오 비율을 제시해주는 시스템입니다.

## 1. 개요
2022년 11월 현재 러-우 전쟁 장기화 및 급격한 금리인상으로 인해 포트폴리오 투자 시 안전자산을 활용한 헷지 전략이 중요해졌다. 

따라서, 국채, 달러화, 엔화, 금 등 기존에 안전자산으로 평가받던 자산들이 러-우 전쟁 기간 및 과거 서브프라임모기지 사태와 같은 주요 금융위기 순간에 안전자산으로서의 제 기능을 수행했는지 검증하고자 한다. 
#### 데이터 수집
- Yahoo Finance를 통해 각 자산들의 Data를 가져와서 필요한 데이터인 'Adj-close'를 제외한 데이터를 제거하여 사용하였다. 
- FRED(Federal  Reserve  Economic  Data)의 데이터를 사용하였다.
- 전미경제조사국(NBER)의 recession 데이터를 사용하였다.

## 2. 실행방식 
### 2-1. 위기 기간을 제시하는 경기 침체 예측 모델
- 모델은 xgb classifier 을 사용하였고, 예측기간은 12 개월로 설정한다. 
- 타겟변수인 NBER_recession 데이터를 n 개월 이후의 경기침체 여부와 경기지표들과의 관계성을 이용하여 모델을 학습시킨다.
- 위 모델을 활용해 값이 0.01 을 상방 돌파하는 순간을 위기 기간 시작, 0.01 을 하방 돌파하는 순간을 기준으로 하여 위기 기간 종료로 설정하여 위기 기간을 추출한다.
- 상방 돌파와 하방 돌파 시점을 고정 비율 포트폴리오 매수 및 매도 시점으로 설정한다.
### 2-2. 위험자산과 안전자산 및 검증 기간
- Yahoo Finance를 통해 위험자산 2개와 안전자산 후보군 8개를 설정하고, SaS를 통한 회귀분석으로 (Probt < 0.05) 안전자산을 선정한다.
- 위의 모델을 통해 제시한 기간으로 위기 기간을 설정한 후 각 자산들의 검증한다.
### 2-3. 최소분산 포트폴리오 비중 및 안전자산과의 괴리
- 선정한 위기기간을 바탕으로 각 기간별 최소분산 포트폴리오 최적화 비중을 확인하고, 안전자산을 제대로 포함하는지 확인한다.
- 이 때, 안전자산을 제대로 포함하지 못하는 사실을 확인하고, 위기 상황에 맞는 새로운 포트폴리오 비중을 제시한다.
### 2-4. 고정 비율 포트폴리오 제시
- 기존의 고정 비율 포트폴리오와 함께 백테스트를 진행하고, 샤프지수 비교를 통해 안전자산의 기능을 수행하며, 앞서 제시한 3개의 위기기간에 기존에 존재하는 고정 비율 포트폴리오를 상회하는 적합한 고정 비율 포트폴리오 제시한다.

##### 테스트 기간 설정
- 서브프라임 모기지 : 2007-06-01 ~ 2010-01-01
- 코로나 : 2019-07-01 ~ 2020-12-01
- 러우전쟁 : 2022-02-01 ~ 2022-10-01 (* 2022-12-01 현재 진행중이지만 분석을 위해 기간을 한정함)

### 3. 실행방법
- 경기침체예측.ipynb을 이용하여 예측기간을 설정해준다.
- ??? SAS를 통해 자산들을 입력하고 안전자산과 위험자산을 확인한다.
- Minimum-Variance-portfolio.ipynb를 이용하여 자산들의 최소분산 포트폴리오 비중을 확인한다.
- ???를 통해 제시한 고정 비율 포트폴리오와 기존의 고정 비율 포트폴리오의 샤프지수를 비교해본다.
- ???
### 4. 한계
- 이번 프로젝트에서는 리소스가 부족해서 리밸런싱을 고려하지 않고 분석하였다. 리밸런싱까지 고려하게 된다면 더 완성적인 포트폴리오를 제시할 수 있을 것으로 예상한다.
- Portfolio_backtest.ipynb를 통해 리밸런싱과 좀 더 다양한 지표들을 확인해볼수 있다.
